<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>All‑In Mortgage Calculator</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0d6efd">

<style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f5f7fa;
    margin: 0;
    padding: 20px;
  }
  .container {
    max-width: 480px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  }
  h1 {
    text-align: center;
    margin-bottom: 20px;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: 600;
  }
  input, select, button {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    background: #0d6efd;
    color: white;
    border: none;
    margin-top: 20px;
    font-size: 18px;
  }
  button:hover {
    background: #0b5ed7;
  }
  .result {
    margin-top: 20px;
    padding: 15px;
    background: #f1f4f9;
    border-radius: 10px;
    font-size: 16px;
  }
</style>
</head>

<body>
<div class="container">
  <h1>All‑In Mortgage Calculator</h1>

  <label>Loan Amount ($)</label>
  <input id="loanAmount" type="number" value="300000">

  <label>Interest Rate (%)</label>
  <input id="interestRate" type="number" step="0.01" value="6.5">

  <label>Loan Term (Years)</label>
  <input id="loanTerm" type="number" value="30">

  <label>Payment Frequency</label>
  <select id="paymentFrequency">
    <option value="monthly" selected>Monthly (12 / year)</option>
    <option value="biweekly">Bi‑Weekly (26 / year)</option>
  </select>

  <label>Property Taxes</label>
  <input id="taxes" type="number" value="3600">
  <select id="taxesFreq">
    <option value="year">Per Year</option>
    <option value="month">Per Month</option>
  </select>

  <label>Homeowners Insurance</label>
  <input id="insurance" type="number" value="1200">
  <select id="insuranceFreq">
    <option value="year">Per Year</option>
    <option value="month">Per Month</option>
  </select>

  <label>PMI (Monthly $)</label>
  <input id="pmi" type="number" value="0">

  <label>One‑Time Extra Principal ($)</label>
  <input id="extraOnce" type="number" value="0">

  <label>Extra Monthly Principal ($)</label>
  <input id="extraMonthly" type="number" value="0">

  <label>Extra Bi‑Weekly Principal ($)</label>
  <input id="extraBiWeekly" type="number" value="0">

  <button onclick="calculate()">Calculate</button>

  <div class="result" id="result"></div>
</div>

<script>
function calculate() {
  const loanAmount = +loanAmountEl.value;
  const annualRate = +interestRate.value;
  const years = +loanTerm.value;
  const frequency = paymentFrequency.value;

  const paymentsPerYear = frequency === "biweekly" ? 26 : 12;
  const ratePerPeriod = annualRate / 100 / paymentsPerYear;
  const totalPayments = years * paymentsPerYear;

  const basePayment =
    loanAmount *
    (ratePerPeriod * Math.pow(1 + ratePerPeriod, totalPayments)) /
    (Math.pow(1 + ratePerPeriod, totalPayments) - 1);

  const taxesVal = +taxes.value;
  const insuranceVal = +insurance.value;

  const taxesPerPeriod =
    taxesFreq.value === "year"
      ? taxesVal / paymentsPerYear
      : taxesVal * (12 / paymentsPerYear);

  const insurancePerPeriod =
    insuranceFreq.value === "year"
      ? insuranceVal / paymentsPerYear
      : insuranceVal * (12 / paymentsPerYear);

  const pmiPerPeriod = +pmi.value * (12 / paymentsPerYear);

  const extra =
    frequency === "biweekly"
      ? +extraBiWeekly.value
      : +extraMonthly.value;

  const totalPayment =
    basePayment +
    taxesPerPeriod +
    insurancePerPeriod +
    pmiPerPeriod +
    extra;

  const yearlyTotal = totalPayment * paymentsPerYear;

  result.innerHTML = `
    <strong>${frequency === "biweekly" ? "Bi‑Weekly" : "Monthly"} Payment:</strong>
    $${totalPayment.toFixed(2)}<br><br>
    <strong>Total Per Year:</strong>
    $${yearlyTotal.toFixed(2)}
  `;
}

const loanAmountEl = document.getElementById("loanAmount");

if ("serviceWorker" in navigator && location.protocol === "https:") {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>